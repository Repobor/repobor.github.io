<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>网络互连与互联网 | Repobor 的文档库</title>
    <meta name="description" content="这是写描述信息">
    <link rel="preload stylesheet" href="/assets/style.078fda3e.css" as="style">
    <link rel="modulepreload" href="/assets/chunks/virtual_search-data.1977425a.js">
    <link rel="modulepreload" href="/assets/chunks/virtual_vitepress-demo.0f1044b8.js">
    <link rel="modulepreload" href="/assets/app.625f3316.js">
    <link rel="modulepreload" href="/assets/articles_02-运维_网络工程师_07-网络互连与互联网.md.42887aee.lean.js">
    
    <meta http-equiv="cache-control" content="no-cache,no-store, must-revalidate">
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <link rel="icon" href="/favicon.ico">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css" crossorigin="">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"dark",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-3dffc6e4><!--[--><!--]--><!--[--><span tabindex="-1" data-v-53c953fb></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-53c953fb> Skip to content </a><!--]--><!----><header class="VPNav" data-v-3dffc6e4 data-v-c20b7646><div class="VPNavBar has-sidebar" data-v-c20b7646 data-v-f0c91a0c><div class="container" data-v-f0c91a0c><div class="VPNavBarTitle has-sidebar" data-v-f0c91a0c data-v-d26bf365><a class="title" href="/" data-v-d26bf365><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.png" alt data-v-157cfc19><!--]--><!--[-->Repobor 的文档库<!--]--><!--[--><!--]--></a></div><div class="content" data-v-f0c91a0c><!--[--><!--]--><div class="VPNavBarSearch search" data-v-f0c91a0c><!----><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><span class="DocSearch-Button-Key">Meta</span><span class="DocSearch-Button-Key">K</span></span></button></div></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-f0c91a0c data-v-721af1e8><span id="main-nav-aria-label" class="visually-hidden" data-v-721af1e8>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/articles/01-start/" data-v-721af1e8 data-v-3c0ebe9b data-v-6f2aa8d0><!--[-->start<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/articles/02-运维/" data-v-721af1e8 data-v-3c0ebe9b data-v-6f2aa8d0><!--[-->运维<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-f0c91a0c data-v-46aa04b0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-46aa04b0 data-v-8d8d9b95 data-v-c7962974><span class="check" data-v-c7962974><span class="icon" data-v-c7962974><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-8d8d9b95><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-8d8d9b95><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-f0c91a0c data-v-278b8a23 data-v-8783bc94><!--[--><a class="VPSocialLink" href="https://gitee.com/free_pan" target="_blank" rel="noopener" data-v-8783bc94 data-v-a4eec9a4><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>码云</title><path d="M11.984 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.016 0zm6.09 5.333c.328 0 .593.266.592.593v1.482a.594.594 0 0 1-.593.592H9.777c-.982 0-1.778.796-1.778 1.778v5.63c0 .327.266.592.593.592h5.63c.982 0 1.778-.796 1.778-1.778v-.296a.593.593 0 0 0-.592-.593h-4.15a.592.592 0 0 1-.592-.592v-1.482a.593.593 0 0 1 .593-.592h6.815c.327 0 .593.265.593.592v3.408a4 4 0 0 1-4 4H5.926a.593.593 0 0 1-.593-.593V9.778a4.444 4.444 0 0 1 4.445-4.444h8.296Z"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-f0c91a0c data-v-8bf439eb data-v-a71c4441><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-a71c4441><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-a71c4441><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-a71c4441><div class="VPMenu" data-v-a71c4441 data-v-aebe97a9><!----><!--[--><!--[--><!----><div class="group" data-v-8bf439eb><div class="item appearance" data-v-8bf439eb><p class="label" data-v-8bf439eb>Appearance</p><div class="appearance-action" data-v-8bf439eb><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-8bf439eb data-v-8d8d9b95 data-v-c7962974><span class="check" data-v-c7962974><span class="icon" data-v-c7962974><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-8d8d9b95><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-8d8d9b95><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-8bf439eb><div class="item social-links" data-v-8bf439eb><div class="VPSocialLinks social-links-list" data-v-8bf439eb data-v-8783bc94><!--[--><a class="VPSocialLink" href="https://gitee.com/free_pan" target="_blank" rel="noopener" data-v-8783bc94 data-v-a4eec9a4><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>码云</title><path d="M11.984 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.016 0zm6.09 5.333c.328 0 .593.266.592.593v1.482a.594.594 0 0 1-.593.592H9.777c-.982 0-1.778.796-1.778 1.778v5.63c0 .327.266.592.593.592h5.63c.982 0 1.778-.796 1.778-1.778v-.296a.593.593 0 0 0-.592-.593h-4.15a.592.592 0 0 1-.592-.592v-1.482a.593.593 0 0 1 .593-.592h6.815c.327 0 .593.265.593.592v3.408a4 4 0 0 1-4 4H5.926a.593.593 0 0 1-.593-.593V9.778a4.444 4.444 0 0 1 4.445-4.444h8.296Z"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-f0c91a0c data-v-15c2a344><span class="container" data-v-15c2a344><span class="top" data-v-15c2a344></span><span class="middle" data-v-15c2a344></span><span class="bottom" data-v-15c2a344></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-3dffc6e4 data-v-671fbb7c><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-671fbb7c><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-671fbb7c><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-671fbb7c>Menu</span></button><a class="top-link" href="#" data-v-671fbb7c> Return to top </a></div><aside class="VPSidebar" data-v-3dffc6e4 data-v-e32d06c1><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-e32d06c1><span class="visually-hidden" id="sidebar-aria-label" data-v-e32d06c1> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-e32d06c1><section class="VPSidebarGroup collapsible" data-v-e32d06c1 data-v-867990ea><div class="title" role="button" data-v-867990ea><h2 class="title-text" data-v-867990ea>网络工程师</h2><div class="action" data-v-867990ea><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-867990ea><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-867990ea><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-867990ea><!--[--><!--[--><a class="VPLink link link" href="/articles/02-%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88/01-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E5%9F%BA%E7%A1%80.html" style="padding-left:0px;" tabindex="-1" data-v-12dd67d1 data-v-6f2aa8d0><!--[--><span class="link-text" data-v-12dd67d1>计算机硬件基础</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/articles/02-%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88/02-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0.html" style="padding-left:0px;" tabindex="-1" data-v-12dd67d1 data-v-6f2aa8d0><!--[--><span class="link-text" data-v-12dd67d1>计算机网络概述</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/articles/02-%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88/03-%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80.html" style="padding-left:0px;" tabindex="-1" data-v-12dd67d1 data-v-6f2aa8d0><!--[--><span class="link-text" data-v-12dd67d1>数据通信基础</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/articles/02-%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88/04-%E5%B9%BF%E5%9F%9F%E9%80%9A%E4%BF%A1%E7%BD%91.html" style="padding-left:0px;" tabindex="-1" data-v-12dd67d1 data-v-6f2aa8d0><!--[--><span class="link-text" data-v-12dd67d1>广域通信网</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/articles/02-%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88/05-%E5%B1%80%E5%9F%9F%E7%BD%91%E5%92%8C%E5%9F%8E%E5%9F%9F%E7%BD%91.html" style="padding-left:0px;" tabindex="-1" data-v-12dd67d1 data-v-6f2aa8d0><!--[--><span class="link-text" data-v-12dd67d1>局域网和城域网</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/articles/02-%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88/06-%E6%97%A0%E7%BA%BF%E5%B1%80%E5%9F%9F%E7%BD%91.html" style="padding-left:0px;" tabindex="-1" data-v-12dd67d1 data-v-6f2aa8d0><!--[--><span class="link-text" data-v-12dd67d1>无线局域网</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link active" href="/articles/02-%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88/07-%E7%BD%91%E7%BB%9C%E4%BA%92%E8%BF%9E%E4%B8%8E%E4%BA%92%E8%81%94%E7%BD%91.html" style="padding-left:0px;" tabindex="-1" data-v-12dd67d1 data-v-6f2aa8d0><!--[--><span class="link-text" data-v-12dd67d1>网络互连与互联网</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/articles/02-%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88/08-%E4%B8%8B%E4%B8%80%E4%BB%A3%E4%BA%92%E8%81%94%E7%BD%91.html" style="padding-left:0px;" tabindex="-1" data-v-12dd67d1 data-v-6f2aa8d0><!--[--><span class="link-text" data-v-12dd67d1>下一代互联网</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/articles/02-%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88/09-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8.html" style="padding-left:0px;" tabindex="-1" data-v-12dd67d1 data-v-6f2aa8d0><!--[--><span class="link-text" data-v-12dd67d1>网络安全</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/articles/02-%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88/10-%E7%BD%91%E7%BB%9C%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%B8%8E%E5%BA%94%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%99%A8.html" style="padding-left:0px;" tabindex="-1" data-v-12dd67d1 data-v-6f2aa8d0><!--[--><span class="link-text" data-v-12dd67d1>网络操作系统与应用服务器</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/articles/02-%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88/11-%E7%BB%84%E7%BD%91%E6%8A%80%E6%9C%AF.html" style="padding-left:0px;" tabindex="-1" data-v-12dd67d1 data-v-6f2aa8d0><!--[--><span class="link-text" data-v-12dd67d1>组网技术</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/articles/02-%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88/12-%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86.html" style="padding-left:0px;" tabindex="-1" data-v-12dd67d1 data-v-6f2aa8d0><!--[--><span class="link-text" data-v-12dd67d1>网络管理</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/articles/02-%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88/13-%E7%BD%91%E7%BB%9C%E8%A7%84%E5%88%92%E8%AE%BE%E8%AE%A1.html" style="padding-left:0px;" tabindex="-1" data-v-12dd67d1 data-v-6f2aa8d0><!--[--><span class="link-text" data-v-12dd67d1>网络规划设计</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-3dffc6e4 data-v-7c01d4a3><div class="VPDoc has-sidebar has-aside" data-v-7c01d4a3 data-v-20b022b2><div class="container" data-v-20b022b2><div class="aside" data-v-20b022b2><div class="aside-curtain" data-v-20b022b2></div><div class="aside-container" data-v-20b022b2><div class="aside-content" data-v-20b022b2><div class="VPDocAside" data-v-20b022b2 data-v-234ededb><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-234ededb data-v-cb53fecc><div class="content" data-v-cb53fecc><div class="outline-marker" data-v-cb53fecc></div><div class="outline-title" data-v-cb53fecc>文章目录</div><nav aria-labelledby="doc-outline-aria-label" data-v-cb53fecc><span class="visually-hidden" id="doc-outline-aria-label" data-v-cb53fecc> Table of Contents for current page </span><ul class="root" data-v-cb53fecc data-v-034c22cf><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-234ededb></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-20b022b2><div class="content-container" data-v-20b022b2><!--[--><!--]--><main class="main" data-v-20b022b2><div style="position:relative;" class="vp-doc _articles_02-%E8%BF%90%E7%BB%B4_%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88_07-%E7%BD%91%E7%BB%9C%E4%BA%92%E8%BF%9E%E4%B8%8E%E4%BA%92%E8%81%94%E7%BD%91" data-v-20b022b2><div><h1 id="frontmatter-title" tabindex="-1">网络互连与互联网 <a class="header-anchor" href="#frontmatter-title" aria-hidden="true">#</a></h1><h2 id="_1-osi-的优点" tabindex="-1">1 OSI 的优点 <a class="header-anchor" href="#_1-osi-的优点" aria-hidden="true">#</a></h2><ul><li>将网络的通信过程划分为小一些、简单一些的部件，有助于各个部件的开发、设计和故障排除</li><li>通过网络组件的标准，允许多个供应商进行开发</li><li>通过定义在模型的每一层实现功能，鼓励产业的标准化允许各种类型的网络硬件和软件互相通信</li><li>防止对某一层所做的改动影响到其他的层，这样有利于开发</li></ul><h2 id="_2-双绞线线序" tabindex="-1">2 双绞线线序 <a class="header-anchor" href="#_2-双绞线线序" aria-hidden="true">#</a></h2><p><img src="/assets/image-20220518080951839.2df5db18.png" alt="image-20220518080951839"></p><h2 id="_3-网络演进总结" tabindex="-1">3 网络演进总结 <a class="header-anchor" href="#_3-网络演进总结" aria-hidden="true">#</a></h2><ol><li>交换机前身：中继器、集线器</li><li>二层交换机：基于MAC转发</li><li>三层交换机：集成路由功能</li><li>多业务交换机：FW/AC/LB/WS <ul><li>可编程交换机：SDN</li><li>SDN部署：Google、AT&amp;T</li><li>CISCO N9K : ACI(Application Centric Infrastructure) 以应用为中心的基础设施</li><li>HW127/128∶敏捷网络，敏捷开发H3C 125、锐捷N18K∶都支持SDN</li></ul></li></ol><h2 id="_4-数通设备总结" tabindex="-1">4 数通设备总结 <a class="header-anchor" href="#_4-数通设备总结" aria-hidden="true">#</a></h2><p><img src="/assets/image-20220518081332690.b41a1e7b.png" alt="image-20220518081332690"></p><h2 id="_5-tcp-ip-参考模型" tabindex="-1">5 TCP/IP 参考模型 <a class="header-anchor" href="#_5-tcp-ip-参考模型" aria-hidden="true">#</a></h2><p><img src="/assets/image-20220518081418707.86ceede0.png" alt="image-20220518081418707"></p><p><img src="/assets/image-20220518081531755.482a5ef4.png" alt="image-20220518081531755"></p><p><img src="/assets/image-20220518081526765.bfb71c0a.png" alt="image-20220518081526765"></p><h2 id="_6-协议簇" tabindex="-1">6 协议簇 <a class="header-anchor" href="#_6-协议簇" aria-hidden="true">#</a></h2><ul><li>传输控制协议/因特网协议（TCP/IP）簇是由美国国防部（DoD）所创建的，主要用来确保数据的完整性及在毁灭性战争中维持通信。</li><li>是由一组不同功能的协议组合在一起构成的协议簇</li><li>TCP/IP 是当今数据网络的基础</li></ul><h2 id="_7-以太网" tabindex="-1">7 以太网 <a class="header-anchor" href="#_7-以太网" aria-hidden="true">#</a></h2><h3 id="_7-1-以太网拓扑" tabindex="-1">7.1 以太网拓扑 <a class="header-anchor" href="#_7-1-以太网拓扑" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220518153448545.d801d243.png" alt="image-20220518153448545"></p><h3 id="_7-2-双工模式" tabindex="-1">7.2 双工模式 <a class="header-anchor" href="#_7-2-双工模式" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220518153531942.f2a33be0.png" alt="image-20220518153531942"></p><ul><li>半双工模式下，共享物理介质的通信双方必须采用CSMA/CD机制来避免冲突。全双工模式下，通信双方可以同时实现双向通信，这种模式不会产生冲突，不需要使用CSMA/CD机制。</li><li>同一物理链路上相连的两台设备的双工模式必须保持一致。(厂商对接案例)</li><li>案例分析：对讲机是半双工的典型例子，电话网络是典型的全双工例子。</li></ul><h3 id="_7-3-冲突域-冲突检测技术-csma-cd" tabindex="-1">7.3 冲突域 冲突检测技术 CSMA/CD <a class="header-anchor" href="#_7-3-冲突域-冲突检测技术-csma-cd" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220518153715089.90863b8b.png" alt="image-20220518153715089"></p><p>CSMA/CD 原理如下：</p><p>先听先发，边听边发；</p><p>一旦冲突，立即停止；</p><p>等待时机，然后再发；</p><p>注：“听” 即监听、检测；“发” 即发送数据</p><blockquote><p>冲突域与广播域的思考：集线器是一个冲突域，交换机的一个接口是一个冲突域；一个 VLAN 是一个广播域</p></blockquote><h2 id="_8-以太网帧结构" tabindex="-1">8 以太网帧结构 <a class="header-anchor" href="#_8-以太网帧结构" aria-hidden="true">#</a></h2><h3 id="_8-1-帧格式" tabindex="-1">8.1 帧格式 <a class="header-anchor" href="#_8-1-帧格式" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220518154133504.9876b5f8.png" alt="image-20220518154133504"></p><h3 id="_8-2-ethernet-ii" tabindex="-1">8.2 Ethernet_II <a class="header-anchor" href="#_8-2-ethernet-ii" aria-hidden="true">#</a></h3><ul><li>Ethernet_II ： Xerox 与 DEC、Intel 在 1982 年指定的 以太网标准帧格式</li></ul><p><img src="/assets/image-20220518154234693.fb546a3f.png" alt="image-20220518154234693"></p><ul><li><p>Ethernet_II 帧类型值 大于等于 1536 （0x0600）</p></li><li><p>以太网数据帧的长度在 64 -1518 字节之间</p></li></ul><h3 id="_8-3-ieee-802-3-帧格式" tabindex="-1">8.3 IEEE 802.3 帧格式 <a class="header-anchor" href="#_8-3-ieee-802-3-帧格式" aria-hidden="true">#</a></h3><ul><li>IEEE 在 1985 年公布的 Ethernet 802.3 的 SNAP 版本以太网帧格式</li></ul><p><img src="/assets/image-20220518154514706.9160d95c.png" alt="image-20220518154514706"></p><ul><li>IEEE 802.3 帧 长度字段 小于等于 1500 （0x05DC）</li><li>总长度：64-1518B</li></ul><h3 id="_8-4-数据帧传输" tabindex="-1">8.4 数据帧传输 <a class="header-anchor" href="#_8-4-数据帧传输" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220518154633502.cdbc3a63.png" alt="image-20220518154633502"></p><ul><li>数据链路层基于 MAC 地址进行帧的转发</li></ul><h2 id="_9-以太网地址-mac-地址-硬件地址" tabindex="-1">9 以太网地址 MAC 地址 / 硬件地址 <a class="header-anchor" href="#_9-以太网地址-mac-地址-硬件地址" aria-hidden="true">#</a></h2><p><img src="/assets/image-20220518154714694.47730afd.png" alt="image-20220518154714694"></p><ul><li>华为产品 MAC 地址 前 3 个字节 ： 0x00E0FC</li><li>思科： 0x0000.c 施乐： 全 0</li></ul><h3 id="_9-1-单播" tabindex="-1">9.1 单播 <a class="header-anchor" href="#_9-1-单播" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220518154920676.fe3031c2.png" alt="image-20220518154920676"></p><p>MAC地址第八位是 0</p><h3 id="_9-2-广播" tabindex="-1">9.2 广播 <a class="header-anchor" href="#_9-2-广播" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220518154931484.9f8cb2bf.png" alt="image-20220518154931484"></p><p>广播帧的目的 MAC 地址为十六进制的 FF:FF:FF:FF:FF:FF</p><p>所有收到广播帧的主机都会处理这个帧。广播方式会产生大量流量，导致带宽利用率降低，进而影响整个网络的性能</p><h3 id="_9-3-组播" tabindex="-1">9.3 组播 <a class="header-anchor" href="#_9-3-组播" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220518204731440.d39153eb.png" alt="image-20220518204731440"></p><p>组播的MAC地址第八位是1</p><p>组播比广播更加高效。组播转发可以理解为选择性的广播，主机侦听特定组播地址，接收并处理目的MAC地址为该组播MAC地址的帧。</p><h2 id="_10-数据帧的发送与接收" tabindex="-1">10 数据帧的发送与接收 <a class="header-anchor" href="#_10-数据帧的发送与接收" aria-hidden="true">#</a></h2><p><img src="/assets/image-20220518204902603.b3d2d602.png" alt="image-20220518204902603"></p><p>当主机接收到的数据帧所包含的目的MAC地址是自己时，会把以太网封装剥掉后送往上层协议。</p><h2 id="_11-以太网小结" tabindex="-1">11 以太网小结 <a class="header-anchor" href="#_11-以太网小结" aria-hidden="true">#</a></h2><ol><li><p>网络设备如何确定以太网数据帧的上层协议？</p><p>以太网帧中包含一个 Type 字段，表示帧中的数据应该发送到上层哪个协议处理。比如，IP 协议对应的 Type 值为0x0800，ARP 协议对应的 Type 值为Ox0806。</p></li><li><p>终端设备接收到数据帧时，会如何处理？</p><p>主机检查帧头中的 目的 MAC 地址，如果 目的 MAC 地址不是 本机 MAC 地址，也不是本机侦听的组播或 广播 MAC 地址，则主机会丢弃收到的帧。</p><p>如果 目的 MAC 地址是 本机 MAC 地址，则接收该帧，检查帧校验序列（FCS）字段，并与本机计算的值对比来确定帧在传输过程中是否保持了完整性。</p><p>如果检查通过，就会剥离帧头和帧尾，然后根据帧头中的 Type 字段来决定把数据发送到哪个上层协议进行后续处理。</p></li></ol><h2 id="_12-ip-协议" tabindex="-1">12 IP 协议 <a class="header-anchor" href="#_12-ip-协议" aria-hidden="true">#</a></h2><h3 id="_12-1-ip-报文格式" tabindex="-1">12.1 IP 报文格式 <a class="header-anchor" href="#_12-1-ip-报文格式" aria-hidden="true">#</a></h3><h4 id="ipv4" tabindex="-1">IPv4 <a class="header-anchor" href="#ipv4" aria-hidden="true">#</a></h4><p><img src="/assets/image-20220518205915536.096001e0.png" alt="image-20220518205915536"></p><ul><li>生存期（TTL） 用于设置一个数据包可经过的路由器数量上限，每经过一台路由器就会减 1</li><li>协议字段包含一个数字，标识有效载荷部分的数据类型，1 = ICMP；16 = TCP；17 = UDP</li></ul><h4 id="ipv6" tabindex="-1">IPv6 <a class="header-anchor" href="#ipv6" aria-hidden="true">#</a></h4><p><img src="/assets/image-20220518205928662.39391883.png" alt="image-20220518205928662"></p><ul><li>跳数限制：与 TTL 相同</li></ul><h2 id="_13-网关" tabindex="-1">13 网关 <a class="header-anchor" href="#_13-网关" aria-hidden="true">#</a></h2><p><img src="/assets/image-20220518210806254.de78a906.png" alt="image-20220518210806254"></p><ul><li>网关用于转发来自不同网段之间的数据包。</li></ul><h2 id="_14-ip-地址" tabindex="-1">14 IP 地址 <a class="header-anchor" href="#_14-ip-地址" aria-hidden="true">#</a></h2><h3 id="_14-1-什么是-ip-地址" tabindex="-1">14.1 什么是 IP 地址 <a class="header-anchor" href="#_14-1-什么是-ip-地址" aria-hidden="true">#</a></h3><ol><li>在 IP 网络中，通信节点需要有一个唯一的 IP 地址</li><li>IP 地址 用于 IP 报文的寻址以及标识一个节点</li><li>IPv4 地址一共 32 bits，使用点分十进制形式标识；</li></ol><p><img src="/assets/image-20220520163500280.2dd62eba.png" alt="image-20220520163500280"></p><table><thead><tr><th>十进制</th><th>192.</th><th>168.</th><th>10.</th><th>1</th></tr></thead><tbody><tr><td>二进制</td><td>11000000</td><td>10101000</td><td>00001010</td><td>00000001</td></tr></tbody></table><h3 id="_14-2-ip-地址类别" tabindex="-1">14.2 IP 地址类别 <a class="header-anchor" href="#_14-2-ip-地址类别" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220520162100349.20b04de4.png" alt="image-20220520162100349"></p><h3 id="_14-3-网络掩码" tabindex="-1">14.3 网络掩码 <a class="header-anchor" href="#_14-3-网络掩码" aria-hidden="true">#</a></h3><ul><li>网络掩码与IP地址搭配使用，用于描述一个IP地址中的网络部分及主机部分。</li><li>网络掩码 32 bits，与 32 bits的IP地址一一对应，掩码中为 1 的位对应IP地址中的网络位，掩码中为 0 的位对应IP地址中的主机位。</li></ul><p><img src="/assets/image-20220520163704459.08d2836d.png" alt="image-20220520163704459"></p><p>默认网络掩码：</p><ul><li>A 类：255.0.0.0</li><li>B 类：255.255.0.0</li><li>C 类：255.255.255.0</li></ul><h3 id="_14-4-ip-网络通信类型" tabindex="-1">14.4 IP 网络通信类型 <a class="header-anchor" href="#_14-4-ip-网络通信类型" aria-hidden="true">#</a></h3><ol><li>单播 Unicast</li><li>广播 Broadcast</li><li>组播 Multicast</li></ol><h3 id="_14-5-ip-地址类型" tabindex="-1">14.5 IP 地址类型 <a class="header-anchor" href="#_14-5-ip-地址类型" aria-hidden="true">#</a></h3><ul><li>网络地址∶指代网络的地址。在网络的IPv4地址范围内，最小地址保留为网络地址。此地址的主机部分的每个主机位均为 0。</li><li>广播地址∶用于向网络中的所有主机发送数据的特殊地址。广播地址使用该网络范围内的最大地址。即主机部分的各比特位全部为 1 的地址。</li><li>主机地址：可分配给网络中终端设备的地址。</li></ul><p><img src="/assets/image-20220520163958720.82ad4c35.png" alt="image-20220520163958720"></p><h2 id="_15-vlsm-划分子网" tabindex="-1">15 VLSM 划分子网 <a class="header-anchor" href="#_15-vlsm-划分子网" aria-hidden="true">#</a></h2><blockquote><p>标准 ABC 类网络问题： IP 地址空间极大浪费；一个广播域中 PC 数量过于庞大，网络可能被广播报文消耗大量资源。</p></blockquote><p><img src="/assets/image-20220520164141877.379d6d34.png" alt="image-20220520164141877"></p><p>子网数量：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>m</mi></msup></mrow><annotation encoding="application/x-tex">2^m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.664392em;"></span><span class="strut bottom" style="height:0.664392em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathrm">2</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span> 向主机位借位后产生的子网个数，m 位 所借的位数</p><p>每个子网主机数量：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">2^n-2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.664392em;"></span><span class="strut bottom" style="height:0.747722em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathrm">2</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">−</span><span class="mord mathrm">2</span></span></span></span> 向主机位借位后的每个子网中可用 IP 数，n 为原主机位剔除被借位后的剩余位数；-2的原因：每个子网的网络号和广播号不可用</p><h2 id="_16-公有ip、私有-ip" tabindex="-1">16 公有IP、私有 IP <a class="header-anchor" href="#_16-公有ip、私有-ip" aria-hidden="true">#</a></h2><p>IPv4 地址空间中有一部分特殊的地址，成为私有 IP 地址，私有IP地址不能直接访可公网( lnternet )的IP，只能在本地使用。</p><table><thead><tr><th>私有IP地址空间</th><th>地址范围</th></tr></thead><tbody><tr><td>10.0.0.0/8</td><td>10.0.0.0 到 10.255.255.255 A1</td></tr><tr><td>172.16.0.0/12</td><td>172.16.0.0 到 172.16.255.255 B16</td></tr><tr><td>192.168.0.0/16</td><td>192.168.0.0 到 192.168.255.255 C256</td></tr></tbody></table><h2 id="_17-cidr-无类域路由" tabindex="-1">17 CIDR 无类域路由 <a class="header-anchor" href="#_17-cidr-无类域路由" aria-hidden="true">#</a></h2><p>CIDR : 无类域间路由，超网 Classless Inter-Domain Routing</p><p>工作原理（路由聚合）：</p><p><img src="/assets/image-20220520164931549.0364c033.png" alt="image-20220520164931549"></p><p><img src="/assets/image-20220520164955948.61fec975.png" alt="image-20220520164955948"></p><p>做法：转换成二进制，写出<mark>相同的掩码位数</mark>，聚合后的 IP 则是首个 IP</p><p><img src="/assets/image-20220520165119679.be756e8d.png" alt="image-20220520165119679"></p><p>优点：</p><ol><li>减小骨干路由器表项压力</li><li>缓解 IP 地址 耗尽</li></ol><p><img src="/assets/image-20220520165222672.1f624ca2.png" alt="image-20220520165222672"></p><h2 id="_18-icmp-协议" tabindex="-1">18 ICMP 协议 <a class="header-anchor" href="#_18-icmp-协议" aria-hidden="true">#</a></h2><blockquote><p>Internet控制消息协议ICMP (Internet Control Message Protocol）是网络层的一个重要协议。ICMP协议用来在网络设备间传递各种差错和控制信息，并对于收集各种网络信息、诊断和排除各种网络故障等方面起着至关重要的作用。</p></blockquote><p><img src="/assets/image-20220520165325982.ec4b6fbf.png" alt="image-20220520165325982"></p><ul><li>ICMP 用来传递差错、控制、查询等信息</li></ul><h3 id="_18-1-icmp-重定向" tabindex="-1">18.1 ICMP 重定向 <a class="header-anchor" href="#_18-1-icmp-重定向" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220520165540867.4d793dc8.png" alt="image-20220520165540867"></p><ol><li><p>主机A希望发送报文到服务器A，于是根据配置的默认网关地址向网关RTB 发送报文。</p></li><li><p>网关RTB 收到报文后，检查报文信息，发现报文应该转发到与源主机在同一网段的另一个网关设备RTA，因为此转发路径是更优的路径。</p></li><li><p>RTB 会向主机发送一个 Redirect 消息，通知主机直接向另一个网关 RTA 发送该报文。</p></li><li><p>主机收到 Redirect 消息后，会向RTA发送报文，然后RTA会将该报文再转发给服务器A。</p></li></ol><h3 id="_18-2-icmp-差错检测" tabindex="-1">18.2 ICMP 差错检测 <a class="header-anchor" href="#_18-2-icmp-差错检测" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220520165712396.5773a000.png" alt="image-20220520165712396"></p><p>ICMP Echo 消息常用于诊断源和目的地之间的网络连通性，同时还可以提供其他信息，如报文往返时间等。</p><h3 id="_18-3-icmp-错误报告" tabindex="-1">18.3 ICMP 错误报告 <a class="header-anchor" href="#_18-3-icmp-错误报告" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220520165822825.03950e92.png" alt="image-20220520165822825"></p><h3 id="_18-4-icmp-数据包格式" tabindex="-1">18.4 ICMP 数据包格式 <a class="header-anchor" href="#_18-4-icmp-数据包格式" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220520165846751.2751a839.png" alt="image-20220520165846751"></p><h3 id="_18-5-icmp-消息类型和编码类型" tabindex="-1">18.5 ICMP 消息类型和编码类型 <a class="header-anchor" href="#_18-5-icmp-消息类型和编码类型" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220520165912303.9d203e64.png" alt="image-20220520165912303"></p><h3 id="_18-6-icmp-典型应用" tabindex="-1">18.6 ICMP 典型应用 <a class="header-anchor" href="#_18-6-icmp-典型应用" aria-hidden="true">#</a></h3><ol><li>Ping</li><li>tracert</li></ol><h3 id="_18-7-icmp-小结" tabindex="-1">18.7 ICMP 小结 <a class="header-anchor" href="#_18-7-icmp-小结" aria-hidden="true">#</a></h3><ol><li>Ping 使用的是哪两类 ICMP 消息？</li></ol><p>​ Ping利用ICMP Echo请求消息(Type值为8 ）来发起检测目的可达性。目的端收到ICMP Echo请求消息后，根据IP报文头中的源地址向源端发送ICMP Echo回复消息（Type值为0)。</p><ol start="2"><li>当网络设备收到 TTL 值 为 0 的 IP 报文时，会如何操作</li></ol><p>​ 如果IP数据包在到达目的地之前TTL值已经降为0，则收到IP数据包的网络设备会丢弃该数据包，并向源端发送ICMP消息通知源端TTL超时。</p><h2 id="_19-arp-协议" tabindex="-1">19 ARP 协议 <a class="header-anchor" href="#_19-arp-协议" aria-hidden="true">#</a></h2><p><img src="/assets/image-20220518223846757.eb02388b.png" alt="image-20220518223846757"></p><p>ARP 老化时间：因系统而异</p><h3 id="_19-1-代理-arp" tabindex="-1">19.1 代理 ARP <a class="header-anchor" href="#_19-1-代理-arp" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220520170452915.33d57bd9.png" alt="image-20220520170452915"></p><p>位于不同网络的网络设备在不配置网关的情况下，可以通过 ARP 代理实现相互通信</p><h3 id="_19-2-免费-arp" tabindex="-1">19.2 免费 ARP <a class="header-anchor" href="#_19-2-免费-arp" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220520170534778.efb78c65.png" alt="image-20220520170534778"></p><p>免费ARP 用于探测 IP 地址是否冲突</p><h3 id="_19-3-小结" tabindex="-1">19.3 小结 <a class="header-anchor" href="#_19-3-小结" aria-hidden="true">#</a></h3><ol><li>网络设备在什么情况下会发送 ARP Request?</li></ol><p>​ 源设备在发送数据给目的设备前，会首先查看自身的ARP缓存，查找ARP缓存中是否存在目的设备的IP地址和MAC地址的映射。如果存在则直接使用，如果不存在则会发送ARP Request。</p><ol start="2"><li>网络设备在什么时候会产生免费 ARP</li></ol><p>​ 当网络上的一个设备被分配了IP地址或者IP地址发生变更后，可以通过免费ARP来检查IP地址是否冲突。</p><h2 id="_20-传输层协议-tcp、udp" tabindex="-1">20 传输层协议 TCP、UDP <a class="header-anchor" href="#_20-传输层协议-tcp、udp" aria-hidden="true">#</a></h2><ul><li>TCP（传输控制协议）属于可靠面向连接的网络协议</li><li>UDP（用户数据报协议）属于不可靠面向无连接的网络协议</li></ul><h3 id="_20-1-tcp-报文格式" tabindex="-1">20.1 TCP 报文格式 <a class="header-anchor" href="#_20-1-tcp-报文格式" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220520172818282.40f3c46b.png" alt="image-20220520172818282"></p><h3 id="_20-2-udp-报文格式" tabindex="-1">20.2 UDP 报文格式 <a class="header-anchor" href="#_20-2-udp-报文格式" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220520172910824.8a524186.png" alt="image-20220520172910824"></p><ul><li>与 TCP 相比，做了很大精简，省略诸多控制字段</li></ul><h3 id="_20-3-tcp-udp-端口号" tabindex="-1">20.3 TCP/UDP 端口号 <a class="header-anchor" href="#_20-3-tcp-udp-端口号" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220520173036584.56d5312b.png" alt="image-20220520173036584"></p><ul><li>源端口随机分配，目标端口使用知名端口</li><li>应用客户端使用的源端口一般为系统中未使用的且大于 1024</li><li>目的端口号为服务器端应用服务器的进程，如 telnet:23</li></ul><h3 id="_20-4-tcp-序列号及确认号" tabindex="-1">20.4 TCP 序列号及确认号 <a class="header-anchor" href="#_20-4-tcp-序列号及确认号" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220520173225286.429ab226.png" alt="image-20220520173225286"></p><h3 id="_20-5-tcp-三次握手建立连接" tabindex="-1">20.5 TCP 三次握手建立连接 <a class="header-anchor" href="#_20-5-tcp-三次握手建立连接" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220520173510401.1766ceac.png" alt="image-20220520173510401"></p><h3 id="_20-6-tcp-四次握手断开连接" tabindex="-1">20.6 TCP 四次握手断开连接 <a class="header-anchor" href="#_20-6-tcp-四次握手断开连接" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220520173542916.eabb7b1e.png" alt="image-20220520173542916"></p><h3 id="_20-7-tcp-窗口机制" tabindex="-1">20.7 TCP 窗口机制 <a class="header-anchor" href="#_20-7-tcp-窗口机制" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220520173605702.9e637730.png" alt="image-20220520173605702"></p><h2 id="_21-数据封装与转发全过程-略" tabindex="-1">21 数据封装与转发全过程（略） <a class="header-anchor" href="#_21-数据封装与转发全过程-略" aria-hidden="true">#</a></h2><h2 id="_21-华为命令行" tabindex="-1">21 华为命令行 <a class="header-anchor" href="#_21-华为命令行" aria-hidden="true">#</a></h2><h3 id="_21-1-基本命令结构" tabindex="-1">21.1 基本命令结构 <a class="header-anchor" href="#_21-1-基本命令结构" aria-hidden="true">#</a></h3><ul><li>每条命令都有独特的格式或语法结构，并在相应的试图下配置</li><li>常规命令语法为 关键字 + 参数</li></ul><p><img src="/assets/image-20220519233736081.c444e75a.png" alt="image-20220519233736081"></p><h3 id="_21-2-命令视图" tabindex="-1">21.2 命令视图 <a class="header-anchor" href="#_21-2-命令视图" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220519233822880.d312773c.png" alt="image-20220519233822880"></p><h3 id="_21-3-命令等级" tabindex="-1">21.3 命令等级 <a class="header-anchor" href="#_21-3-命令等级" aria-hidden="true">#</a></h3><table><thead><tr><th style="text-align:center;">用户等级</th><th style="text-align:center;">名称</th><th style="text-align:center;">操作</th></tr></thead><tbody><tr><td style="text-align:center;">0</td><td style="text-align:center;">访问级</td><td style="text-align:center;">诊断/查看（ping、tracert、telnet、display）</td></tr><tr><td style="text-align:center;">1</td><td style="text-align:center;">监控级</td><td style="text-align:center;">display 内容稍微丰富</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">配置级</td><td style="text-align:center;">网络服务，包括路由，各个网络层次的命令</td></tr><tr><td style="text-align:center;">3 - 15</td><td style="text-align:center;">管理级</td><td style="text-align:center;">系统管理层面（升级系统/上传下载文件，debug）</td></tr></tbody></table><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Huawei</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> system-view </span><span style="color:#676E95;font-style:italic;"># 进入系统视图</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">Huawei</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> sysname Demo </span><span style="color:#676E95;font-style:italic;"># 配置设备名称</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">Demo</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> header login information</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Welcome to Huawei</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 设置用户登录前显示的标题信息</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">Demo</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> header shell information</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Welcome to Huawei</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 设置用户登录后显示的标题信息</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">Demo</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> command-privilege level </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> view user save </span><span style="color:#676E95;font-style:italic;"># 修改命令级别，只有 3 级的用户才能执行 save 命令</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Demo</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> clock timezone BJ add </span><span style="color:#F78C6C;">08</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 设置所在时区</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Demo</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> clock datatime hh:mm:ss year-mm-dd </span><span style="color:#676E95;font-style:italic;"># 设置当前时间</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Demo</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> display clock </span><span style="color:#676E95;font-style:italic;"># 显示当前时间</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Demo</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> display current-configuration </span><span style="color:#676E95;font-style:italic;"># 显示当前配置</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Demo</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> save </span><span style="color:#676E95;font-style:italic;"># 将当前配置保存到目录下 &quot;vrpcfg.zip&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Demo</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> startup saved-configuration vrpcfg.zip </span><span style="color:#676E95;font-style:italic;"># 下次启动时加载 &quot;vrpcfg.zip&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">Info:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Succeeded</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">setting</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">file</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">booting</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">system</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Demo</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> reset saved-configuration </span><span style="color:#676E95;font-style:italic;"># 删除启动配置文件（也可以直接delete）</span></span>
<span class="line"><span style="color:#FFCB6B;">Clear</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">configuration</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">device</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">successfully.</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Demo</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> compare configuration </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">filename</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 比较当前配置与保存的配置</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">Huawei</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> aaa</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">00</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Huawei</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">sy</span></span>
<span class="line"><span style="color:#FFCB6B;">Enter</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">system</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">view,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">view</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">with</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Ctrl+Z.</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">Huawei</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">sysname R1</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">R1</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">interface g0/</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">/</span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">R1-GigabitEthernet0/</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">/</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">display int brief</span></span>
<span class="line"><span style="color:#FFCB6B;">PHY:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Physical</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">down: administratively down</span></span>
<span class="line"><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">l</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">: loopback</span></span>
<span class="line"><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">s</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">: spoofing</span></span>
<span class="line"><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">b</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">: BFD down</span></span>
<span class="line"><span style="color:#FFCB6B;">^down:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">standby</span></span>
<span class="line"><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">e</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">: ETHOAM down</span></span>
<span class="line"><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">d</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">: Dampening Suppressed</span></span>
<span class="line"><span style="color:#FFCB6B;">InUti/OutUti:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">input</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">utility/output</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">utility</span></span>
<span class="line"><span style="color:#FFCB6B;">Interface</span><span style="color:#A6ACCD;">                   </span><span style="color:#C3E88D;">PHY</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">Protocol</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">InUti</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">OutUti</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">inErrors</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">outErrors</span></span>
<span class="line"><span style="color:#FFCB6B;">Ethernet0/0/0</span><span style="color:#A6ACCD;">               </span><span style="color:#C3E88D;">down</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">down</span><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">          </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">          </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#FFCB6B;">Ethernet0/0/1</span><span style="color:#A6ACCD;">               </span><span style="color:#C3E88D;">down</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">down</span><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">          </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">          </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#FFCB6B;">Ethernet0/0/2</span><span style="color:#A6ACCD;">               </span><span style="color:#C3E88D;">down</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">down</span><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">          </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">          </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#FFCB6B;">Ethernet0/0/3</span><span style="color:#A6ACCD;">               </span><span style="color:#C3E88D;">down</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">down</span><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">          </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">          </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#FFCB6B;">Ethernet0/0/4</span><span style="color:#A6ACCD;">               </span><span style="color:#C3E88D;">down</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">down</span><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">          </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">          </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#FFCB6B;">Ethernet0/0/5</span><span style="color:#A6ACCD;">               </span><span style="color:#C3E88D;">down</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">down</span><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">          </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">          </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#FFCB6B;">Ethernet0/0/6</span><span style="color:#A6ACCD;">               </span><span style="color:#C3E88D;">down</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">down</span><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">          </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">          </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#FFCB6B;">Ethernet0/0/7</span><span style="color:#A6ACCD;">               </span><span style="color:#C3E88D;">down</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">down</span><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">          </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">          </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#FFCB6B;">GigabitEthernet0/0/0</span><span style="color:#A6ACCD;">        </span><span style="color:#C3E88D;">up</span><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">down</span><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">          </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">          </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#FFCB6B;">GigabitEthernet0/0/1</span><span style="color:#A6ACCD;">        </span><span style="color:#C3E88D;">down</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">down</span><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">          </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">          </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#FFCB6B;">NULL0</span><span style="color:#A6ACCD;">                       </span><span style="color:#C3E88D;">up</span><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">up</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">s</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">       </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">          </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">          </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">R1-GigabitEthernet0/</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">/</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">ip add 12.1.1.1 </span><span style="color:#F78C6C;">24</span></span>
<span class="line"><span style="color:#FFCB6B;">May</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2022</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">17</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">41</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">58</span><span style="color:#C3E88D;">-</span><span style="color:#F78C6C;">08</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">R1</span><span style="color:#A6ACCD;"> %%01IFNET/4/LINK_STATE</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">l</span><span style="color:#89DDFF;">)[</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">:The </span><span style="color:#C3E88D;">line</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">protocol</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">IP</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">on</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">GigabitEthernet0/</span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">/</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">has</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">entered</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">UP</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">state.</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">R1</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> aaa</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">R1-aaa</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">local-user admin123 privilege level </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> password cipher admin123</span></span>
<span class="line"><span style="color:#FFCB6B;">Info:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user.</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">R1-aaa</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">local-user admin123 service-type telnet</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">R1-aaa</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">q</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">R1</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">user-int vty </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">R1-ui-vty0-</span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">authentication-mode aaa</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">R1-ui-vty0-</span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">q</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">R1</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">q</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">R</span><span style="color:#89DDFF;">1&gt;</span><span style="color:#A6ACCD;">telnet 12.1.1.2</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">Press</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">CTRL_]</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">quit</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">telnet</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mode</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">Trying</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">12.1.1.2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">...</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">Error:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Can</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">t connect to the remote host</span></span>
<span class="line"><span style="color:#C3E88D;">&lt;R1&gt;telnet 12.1.1.1</span></span>
<span class="line"><span style="color:#C3E88D;">  Press CTRL_] to quit telnet mode</span></span>
<span class="line"><span style="color:#C3E88D;">  Trying 12.1.1.1 ...</span></span>
<span class="line"><span style="color:#C3E88D;">  Connected to 12.1.1.1 ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C3E88D;">Login authentication</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C3E88D;">Username:admin123</span></span>
<span class="line"><span style="color:#C3E88D;">Password:</span></span>
<span class="line"><span style="color:#C3E88D;">&lt;R1&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><h2 id="_22-动态路由协议分类" tabindex="-1">22 动态路由协议分类 <a class="header-anchor" href="#_22-动态路由协议分类" aria-hidden="true">#</a></h2><h2 id="" tabindex="-1"><img src="/assets/image-20220522152953328.c0c135e9.png" alt="image-20220522152953328"> <a class="header-anchor" href="#" aria-hidden="true">#</a></h2><h2 id="_23-链路状态路由协议" tabindex="-1">23 链路状态路由协议 <a class="header-anchor" href="#_23-链路状态路由协议" aria-hidden="true">#</a></h2><p>使用距离矢量路由协议的路由器并不了解网络的拓扑。该路由器只知道︰</p><ul><li>自身与目的网络之间的<mark>距离</mark></li><li>应该往哪个<mark>方向</mark>或哪个接口转发数据包</li></ul><p><img src="/assets/image-20220526202850190.9b066d34.png" alt="image-20220526202850190"></p><p><strong>特点</strong>：周期性更新（广播）整张路由表</p><p><img src="/assets/image-20220526202927634.c2d7f3fe.png" alt="image-20220526202927634"></p><h3 id="_23-1-信息交换过程" tabindex="-1">23.1 信息交换过程 <a class="header-anchor" href="#_23-1-信息交换过程" aria-hidden="true">#</a></h3><p>路由器初始启动</p><ul><li>最初的网络发现：直连路由写入路由表</li></ul><p><img src="/assets/image-20220526203019833.c3d34271.png" alt="image-20220526203019833"></p><ul><li>初次路由信息交换</li></ul><p><img src="/assets/image-20220526203041904.6cb94f3d.png" alt="image-20220526203041904"></p><ul><li>再次路由信息交换</li></ul><p><img src="/assets/image-20220526203119990.89c4a616.png" alt="image-20220526203119990"></p><p>路由器完成收敛的标志</p><ul><li>所有路由表包含相同网络可达性信息</li><li>网络（路由）进入一个稳态</li></ul><p>路由器继续交换路由信息</p><ul><li>当无新路由信息被更新时收敛结束</li><li>网络在达到收敛前无法完全正常工作</li></ul><h3 id="_23-2-rip-路由的度量值" tabindex="-1">23.2 RIP 路由的度量值 <a class="header-anchor" href="#_23-2-rip-路由的度量值" aria-hidden="true">#</a></h3><p>RIP以跳数（Hops）作为度量值，虽然简单，但事实上不科学，如下图：</p><p><img src="/assets/image-20220526203349491.c1493bcd.png" alt="image-20220526203349491"></p><p><img src="/assets/image-20220526203404676.40229ccd.png" alt="image-20220526203404676"></p><h3 id="_23-3-路由协议优先级" tabindex="-1">23.3 路由协议优先级 <a class="header-anchor" href="#_23-3-路由协议优先级" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220526203443323.98aa4640.png" alt="image-20220526203443323"></p><p><img src="/assets/image-20220526203450073.dca1c5a6.png" alt="image-20220526203450073"></p><p><img src="/assets/image-20220526203520984.31b8eee0.png" alt="image-20220526203520984"></p><h3 id="_23-4-路由环路的产生" tabindex="-1">23.4 路由环路的产生 <a class="header-anchor" href="#_23-4-路由环路的产生" aria-hidden="true">#</a></h3><ul><li>路由器C <code>10.1.4.0/24</code> 出现故障</li></ul><p><img src="/assets/image-20220526204223215.a1e222a7.png" alt="image-20220526204223215"></p><p><img src="/assets/image-20220526204354060.f504d1a8.png" alt="image-20220526204354060"></p><p><img src="/assets/image-20220526204404870.1e0e23e4.png" alt="image-20220526204404870"></p><ul><li><p>RIP 三个计时器：Hello 30s、Dead 180s、垃圾计时器 120s</p><p>180s没有收到更新，标记为无效路由；再过120s没收到更新，删表</p></li><li><p>针对路由环路的理解</p></li></ul><h3 id="_23-5-防环机制" tabindex="-1">23.5 防环机制 <a class="header-anchor" href="#_23-5-防环机制" aria-hidden="true">#</a></h3><ul><li>定义最大度量以防止计数至无穷大</li><li>水平分割</li><li>路由中毒</li><li>毒性逆转</li><li>抑制计时器</li><li>触发更新</li></ul><h3 id="_23-6-环路避免" tabindex="-1">23.6 环路避免 <a class="header-anchor" href="#_23-6-环路避免" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220526205136332.db95a83c.png" alt="image-20220526205136332"></p><p><img src="/assets/image-20220526205314653.95ad2fdc.png" alt="image-20220526205314653"></p><p><img src="/assets/image-20220526205321025.a7d62bfb.png" alt="image-20220526205321025"></p><p><img src="/assets/image-20220526205326754.a5cecac0.png" alt="image-20220526205326754"></p><h3 id="_23-7-rip-协议概述" tabindex="-1">23.7 RIP 协议概述 <a class="header-anchor" href="#_23-7-rip-协议概述" aria-hidden="true">#</a></h3><ul><li>RIP（Routing Information Protocols，路由信息协议）应用较早、使用较为普遍的内部网关协议</li><li>适用于小型网络，是典型的距离矢量路由协议</li><li>RIP基于UDP，端口<code>520</code></li><li>华为设备上路由优先级为<code>100</code></li></ul><h2 id="_24-ospf" tabindex="-1">24 OSPF <a class="header-anchor" href="#_24-ospf" aria-hidden="true">#</a></h2><h3 id="_24-1-lsas-泛洪" tabindex="-1">24.1 LSAs 泛洪 <a class="header-anchor" href="#_24-1-lsas-泛洪" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220526205526380.27bfd97c.png" alt="image-20220526205526380"></p><h3 id="_24-2-构建-lsdb" tabindex="-1">24.2 构建 LSDB <a class="header-anchor" href="#_24-2-构建-lsdb" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220526205558604.ea523472.png" alt="image-20220526205558604"></p><h3 id="_24-3-spf-计算" tabindex="-1">24.3 SPF 计算 <a class="header-anchor" href="#_24-3-spf-计算" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220526205624446.1623b2b7.png" alt="image-20220526205624446"></p><h3 id="_24-4-维护路由表" tabindex="-1">24.4 维护路由表 <a class="header-anchor" href="#_24-4-维护路由表" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220526205643369.cd5c6b53.png" alt="image-20220526205643369"></p><h3 id="_24-5-ospf-简介" tabindex="-1">24.5 OSPF 简介 <a class="header-anchor" href="#_24-5-ospf-简介" aria-hidden="true">#</a></h3><ul><li>Open Shortest Path First，开放式最短路径优先协议</li><li>OSPF是一种链路状态路由协议，在RFC 2328中描述</li><li>Open 意味着公有，任何厂商都能支撑OSPF，目前业内使用最广泛的IGP</li><li>在华为设备上，OSPF协议优先级 Internal 10，External 150</li><li>路由器之间交互的是链路状态信息，而不是直接交互路由</li><li>每台OSPF路由器都知晓网络拓扑结构</li><li>采用SPF算法计算达到目的地的最短路径</li><li>支持VLSM，支持手工路由汇总</li></ul><h3 id="_24-6-ospf-基本特点" tabindex="-1">24.6 OSPF 基本特点 <a class="header-anchor" href="#_24-6-ospf-基本特点" aria-hidden="true">#</a></h3><ul><li>适应范围广：支持各种规模的网络。</li><li>快速收敛：在网络的拓扑结构发生变化后立即发送更新报文，使这一变化在自治系统中同步。</li><li>无自环：使用SPF最短路径树算法进行路由计算，不会产生环路。</li><li>区域划分：允许网络被划分成区域来管理，链路状态数据库仅需和区域内其他路由器保持一致。<mark>减小对路由器内存和CPU的消耗</mark>。同时区域间传送的路由信息减小，<mark>降低网络带宽占用</mark>。</li></ul><h3 id="_24-7-routerid" tabindex="-1">24.7 RouterID <a class="header-anchor" href="#_24-7-routerid" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220526205939041.92a154b6.png" alt="image-20220526205939041"></p><ul><li>Router Identifier，路由器标示符，用于在一个OSPF域中唯一地标识一台路由器，每台运行OSPF的路由器具备Router-ID。</li><li>相同 OSPF 域内，禁止出现两台路由器有相同 RouterID 。</li><li>OSPF Router-ID 可以通过手工配置的方式，或使用自动获取的方式。自动选取的机制是∶若路由器存在 loopback 接口，则选最大的 loopback 接口IP地址，若无则选活跃的物理接口中IP地址最大的作为 RouterID（实际项目手工配置）。</li><li>Router-ID 值遵循稳定第一的原则，不会抢占。如果需要更新 RouterID： <ul><li>重配地址：<code>Undo ip address</code></li><li>重启进程：<code>Reset ospf process</code></li></ul></li></ul><h3 id="_24-8-ospf-cost" tabindex="-1">24.8 OSPF Cost <a class="header-anchor" href="#_24-8-ospf-cost" aria-hidden="true">#</a></h3><ul><li>OSPF使用Cost“开销”作为路由度量值。</li><li>OSPF接口 cost=100M/接口带宽，其中100M为OSPF参考带宽（reference-bandwidth）,可修改。</li><li>每一个激活OSPF的接口都有一个cost值。</li><li>一条OSPF路由的cost由该路由从起源一路到达本地的所有<mark>入接口cost值的总和</mark>。</li></ul><p><img src="/assets/image-20220526210321031.f9a89734.png" alt="image-20220526210321031"></p><p><img src="/assets/image-20220526210334225.a175c94a.png" alt="image-20220526210334225"></p><h3 id="_24-9-ospf-三张表" tabindex="-1">24.9 OSPF 三张表 <a class="header-anchor" href="#_24-9-ospf-三张表" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220526210404868.c94dfe74.png" alt="image-20220526210404868"></p><h3 id="_24-10-ospf-报文类型" tabindex="-1">24.10 OSPF 报文类型 <a class="header-anchor" href="#_24-10-ospf-报文类型" aria-hidden="true">#</a></h3><ul><li>Hello 建立和维护OSPF邻居关系</li><li>DBD 链路状态数据库描述信息（描述LSDB中的LSA头部信息）</li><li>LSR 链路状态请求，向OSPF邻居请求链路状态信息</li><li>LSU 链路状态更新（包含一条或多条LSA）</li><li>LSAck 多LSU中的LSA进行确认</li></ul><h3 id="_24-11-ospf-邻居关系建立" tabindex="-1">24.11 OSPF 邻居关系建立 <a class="header-anchor" href="#_24-11-ospf-邻居关系建立" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220526210609094.13fa2633.png" alt="image-20220526210609094"></p><p><img src="/assets/image-20220526210628808.1003b804.png" alt="image-20220526210628808"></p><p><img src="/assets/image-20220526210638434.246cab53.png" alt="image-20220526210638434"></p><h3 id="_24-12-ospf-网络类型" tabindex="-1">24.12 OSPF 网络类型 <a class="header-anchor" href="#_24-12-ospf-网络类型" aria-hidden="true">#</a></h3><ul><li>OSPF支持的网络类型：</li><li>点到点网络</li><li>广播型多路访问网络</li><li>非广播型多路访问（NBMA）网络</li><li>P2MP网络</li></ul><p>常用链路层协议对应的默认网络类型：</p><p><img src="/assets/image-20220526210824044.08f41dcb.png" alt="image-20220526210824044"></p><h3 id="_24-13-dr-bdr" tabindex="-1">24.13 DR BDR <a class="header-anchor" href="#_24-13-dr-bdr" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220526210858685.f9fad648.png" alt="image-20220526210858685"></p><p><img src="/assets/image-20220526210912095.2ed887df.png" alt="image-20220526210912095"></p><ul><li><p>为减小多路访问网络中的OSPF流量，OSPF会在每一个Ma网络（多路访问网络）选举一个指定路由器（DR）和一个备用指定路由器（BDR）。</p><ul><li>DR选举规则：最高OSPF接口优先级拥有者被选做 DR ，如果优先级相等（默认为1），具有最高 OSPF RouterID 的路由器被选举为DR，并且 DR 具有非抢占性。</li></ul></li><li><p>指定路由器（DR）：负责使用变化新消息更新其他OSPF路由器（DRother）</p></li><li><p>备用指定路由器（BDR）：监控DR状态，并在当前DR发生故障后接替其角色</p></li><li><p>注意OSPF为“接口敏感协议”，DR及BDR的身份状态是基于OSPF接口的</p></li><li><p>Ma 网络中，所有 DRother 路由器均只与DR和BDR建立邻接关系， DRother 间不建立邻接关系。</p></li><li><p>如此一来，Ma 网络中OSPF需要维护的邻居关系大幅减少：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>M</mi><mo>=</mo><mo>(</mo><mi>n</mi><mo>−</mo><mn>2</mn><mo>)</mo><mo>×</mo><mn>2</mn><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">M = (n - 2) \times 2 + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mrel">=</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mbin">−</span><span class="mord mathrm">2</span><span class="mclose">)</span><span class="mbin">×</span><span class="mord mathrm">2</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span></p></li><li><p>LSA 泛洪问题得到缓解</p></li></ul><h3 id="_12-14-lsa-泛洪" tabindex="-1">12.14 LSA 泛洪 <a class="header-anchor" href="#_12-14-lsa-泛洪" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220526211229671.77bb2ad2.png" alt="image-20220526211229671"></p><ul><li>路由器R3用224.0.0.6通知DR及BDR，DR、BDR监听224.0.0.6这一组播地址</li><li>DR向组播地址224.0.0.5发送更新以通知其他路由器，所有的OSPF路由器监听224.0.0.5</li><li>路由器收到链路变化后的LSU后，更新自己的LSDB，进行SPF重新计算，更新路由表</li></ul><h3 id="_12-15-ospf-区域" tabindex="-1">12.15 OSPF 区域 <a class="header-anchor" href="#_12-15-ospf-区域" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220526211400742.c507460c.png" alt="image-20220526211400742"></p><p>单区域存在的问题</p><ul><li>LSA泛洪严重，OSPF路由器的负担很大</li><li>区域内部动荡会引起全网路由器的SPF计算</li><li>LSDB庞大，资源消耗过多，设备性能下降，影响数据转发</li><li>每台路由器都需要维护的路由表越来越大，单区域内路由无法汇总</li></ul><p><img src="/assets/image-20220526211411249.bf83658c.png" alt="image-20220526211411249"></p><p>多区域获得的改进</p><ul><li><p>减少了LSA洪泛范围，有效把拓扑变化控制在区域内，达到网络优化的目的</p></li><li><p>在区域边界可以做路由汇总，减小了路由表</p></li><li><p>充分利用OSPF特殊区域的扩展性，进一步减少LSA泛洪，从而优化路由</p></li><li><p>多区域提高了网络的扩展性，有利于组建大规模网络</p></li><li><p>所有非骨干区域必须与骨干区域直连。</p><p><img src="/assets/image-20220526211515115.fb4d4732.png" alt="image-20220526211515115"></p></li></ul><h3 id="_12-16-ospf-路由器角色" tabindex="-1">12.16 OSPF 路由器角色 <a class="header-anchor" href="#_12-16-ospf-路由器角色" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220526211548864.d8fb9e65.png" alt="image-20220526211548864"></p><h3 id="_12-17-ospf-的基本配置" tabindex="-1">12.17 OSPF 的基本配置 <a class="header-anchor" href="#_12-17-ospf-的基本配置" aria-hidden="true">#</a></h3><ul><li><p>创建 OSPF 进程，并指定 OSPF 进程号以及 RouterID</p><p><code>[Router] ospf [process-id|router-id router-id]</code></p></li><li><p>在 area0 中宣告指定端口</p></li></ul><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">[Router] area area-id</span></span>
<span class="line"><span style="color:#A6ACCD;">[Router] network ip-address wildcard-mask</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>通配符掩码 wildcard-mask 通配符是一个用于决定哪些IP地址该精确匹配（0代表匹配）哪些地址位被忽略的32位数值。通常用于访问控制列表（ACL）、OSPF路由协议通告。</li></ul><p><img src="/assets/image-20220526215644017.afeb7462.png" alt="image-20220526215644017"></p><p><img src="/assets/image-20220526215704932.a7c4dc26.png" alt="image-20220526215704932"></p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">ospf 1 router-id 2.2.2.2</span></span>
<span class="line"><span style="color:#A6ACCD;"> area 0</span></span>
<span class="line"><span style="color:#A6ACCD;">  network 176.16.1.0 0.0.0.255</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="/assets/image-20220526215829854.2527071e.png" alt="image-20220526215829854"></p><p><strong>单区域OSPF 配置实例</strong></p><p><img src="/assets/image-20220526215932140.ee5acc68.png" alt="image-20220526215932140"></p><p><strong>多区域OSPF 配置实例</strong></p><p><img src="/assets/image-20220526215957678.3e53b64c.png" alt="image-20220526215957678"></p><ul><li>R2（ASR） 配置如下</li></ul><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">[R2] ospf 1 router-id 2.2.2.2[R2-ospf-1] area 0</span></span>
<span class="line"><span style="color:#A6ACCD;">[R2-ospf-1-area-0.0.0.0] network 192.168.12.0 0.0.0.255</span></span>
<span class="line"><span style="color:#A6ACCD;">[R2-ospf-1] area 1</span></span>
<span class="line"><span style="color:#A6ACCD;">[R2-ospf-1-area-0.0.0.1] network 192.168.23.0 0.0.0.255</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>OSPF 查看与验证</strong></p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">display ospf biref # 查看OSPF协议相关运行参数</span></span>
<span class="line"><span style="color:#A6ACCD;">display ospf peer # 查看OSPF 邻居表</span></span>
<span class="line"><span style="color:#A6ACCD;">display ospf lsdb # 查看LSDB表</span></span>
<span class="line"><span style="color:#A6ACCD;">display ospf routing # 查看OSPF路由</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>​</p><p><strong>修改OSPF cost</strong></p><p><img src="/assets/image-20220526220244322.a87bc73b.png" alt="image-20220526220244322"></p><p><strong>修改OSPF DR 优先级</strong></p><p><img src="/assets/image-20220526220236609.1d425eca.png" alt="image-20220526220236609"></p><h2 id="_25-二层交换机" tabindex="-1">25 二层交换机 <a class="header-anchor" href="#_25-二层交换机" aria-hidden="true">#</a></h2><p><img src="/assets/image-20220526221137696.a53c3b3a.png" alt="image-20220526221137696"></p><h3 id="_25-1-主要功能" tabindex="-1">25.1 主要功能 <a class="header-anchor" href="#_25-1-主要功能" aria-hidden="true">#</a></h3><ul><li><p>维护MAC地址表，MAC寻址</p></li><li><p>数据帧的转发及过滤</p></li><li><p>二层环路避免及冗余性支持</p><p><img src="/assets/image-20220526221224638.8f3d47e4.png" alt="image-20220526221224638"></p></li></ul><h3 id="_25-2-mac地址表" tabindex="-1">25.2 MAC地址表 <a class="header-anchor" href="#_25-2-mac地址表" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220526221727745.9a18d100.png" alt="image-20220526221727745"></p><h3 id="_25-3-交换机寻址过程" tabindex="-1">25.3 交换机寻址过程 <a class="header-anchor" href="#_25-3-交换机寻址过程" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220526221758000.4cbb1964.png" alt="image-20220526221758000"></p><p><img src="/assets/image-20220526221805195.6a4ea72a.png" alt="image-20220526221805195"></p><p><img src="/assets/image-20220526221811725.e08571fe.png" alt="image-20220526221811725"></p><p><img src="/assets/image-20220526221817327.25eff1a7.png" alt="image-20220526221817327"></p><p><img src="/assets/image-20220526221823177.ccbd20ff.png" alt="image-20220526221823177"></p><p><img src="/assets/image-20220526221828314.5e620f9a.png" alt="image-20220526221828314"></p><p><img src="/assets/image-20220526221833127.d9a30589.png" alt="image-20220526221833127"></p><p><img src="/assets/image-20220526221839517.d998a517.png" alt="image-20220526221839517"></p><h2 id="_26-vlan" tabindex="-1">26 VLAN <a class="header-anchor" href="#_26-vlan" aria-hidden="true">#</a></h2><h3 id="_26-1-为什么需要-vlan" tabindex="-1">26.1 为什么需要 VLAN <a class="header-anchor" href="#_26-1-为什么需要-vlan" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220526221923645.312df30e.png" alt="image-20220526221923645"></p><ul><li>整台交换机所有端口均属于同一广播域</li><li>网络中的设备可能被大量的广播损耗资源</li><li>无法根据业务需求灵活规划网络结构</li></ul><p><img src="/assets/image-20220526221950018.97f7a411.png" alt="image-20220526221950018"></p><ul><li>VLAN（Virtual LAN）可以解决上述问题</li><li>通过将交换机端口加入特定VLAN，可以起到隔离广播的作用。</li></ul><p><img src="/assets/image-20220526222041769.37c22a4d.png" alt="image-20220526222041769"></p><ul><li>不同VLAN是不同广播域、不同网段</li><li>可根据业务需求灵活进行VLAN规划</li><li>不同的VLAN间无法进行二层互访</li></ul><h3 id="_26-2-vlan-知识小结" tabindex="-1">26.2 VLAN 知识小结 <a class="header-anchor" href="#_26-2-vlan-知识小结" aria-hidden="true">#</a></h3><ul><li>一个VLAN中所有设备处于同一广播域内，不同的VLAN为不同的广播域，一个VLAN一般是一个IP网段，不同的VLAN规划到不同的IP网段；</li><li>不同的VLAN之间二层隔离，广播不能跨越VLAN传播，因此不同VLAN之间的设备无法进行二层通信，需通过三层设备实现互通;</li><li>VLAN中成员关系多基于交换机的接口进行静态地分配，划分VLAN就是将交换机的接口添加到特定VLAN；</li><li>VLAN工作于OSI参考模型的第二层，是二层交换机的一个非常根本的工作机制。</li></ul><h3 id="_26-3-vlan-成员模式" tabindex="-1">26.3 VLAN 成员模式 <a class="header-anchor" href="#_26-3-vlan-成员模式" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220526222216475.10daa543.png" alt="image-20220526222216475"></p><ul><li>静态VLAN：以手工的方式将接口加入特定的VLAN;</li><li>动态VLAN：根据接入到交换机的客户端的MAC地址等信息，动态地将交换机的接口添加到特定的VLAN。</li></ul><h3 id="_26-4-vlan-端口分类" tabindex="-1">26.4 VLAN 端口分类 <a class="header-anchor" href="#_26-4-vlan-端口分类" aria-hidden="true">#</a></h3><ul><li>Access 端口：一般用于连接主机的端口，Access 端口只能属于一个VLAN</li><li>Trunk 端口：一般用于交换机之间连接的端口，trunk端口可以属于多个VLAN，可以接收和发送多个VLAN报文。</li><li>Hybrid 端口：可以用于交换机之间连接，也可以用于接用户的计算机 Hybrid 端口可以属于多个VLAN，可以接收和发送多个 VLAN 的报文。</li></ul><h3 id="_26-5-access-接口" tabindex="-1">26.5 Access 接口 <a class="header-anchor" href="#_26-5-access-接口" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220526222407727.f4aee872.png" alt="image-20220526222407727"></p><h3 id="_26-6-trunk-接口" tabindex="-1">26.6 Trunk 接口 <a class="header-anchor" href="#_26-6-trunk-接口" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220526222424157.1b1c8abf.png" alt="image-20220526222424157"></p><ul><li>当一条链路，需要承载多个VLAN信息的时候，需要使用trunk来实现</li><li>Trunk 两端交换机需采用相同的干道协议</li><li>一般用于交换机之间或交换机与路由器直连互联</li></ul><h3 id="_26-7-802-1q" tabindex="-1">26.7 802.1Q <a class="header-anchor" href="#_26-7-802-1q" aria-hidden="true">#</a></h3><p><img src="/assets/image-20220526222501175.d88311ba.png" alt="image-20220526222501175"></p><h3 id="_26-8-端口的缺省id-pvid" tabindex="-1">26.8 端口的缺省ID（PVID） <a class="header-anchor" href="#_26-8-端口的缺省id-pvid" aria-hidden="true">#</a></h3><ul><li>每个Access、Trunk、Hybrid、QinQ 类型的端口都可以配置一个缺省VLAN（PVID：PortDefault VLAN ID），表示端口所属的VLAN。</li><li>对于 Access 类型端口，PVID的数值表示当前端口所属VLAN。</li><li>对于 Trunk、Hybrid 类型端口，由于 Hybrid 类型端口和 Trunk 类型端口允许多个 VLAN 数据帧通过，也可以理解为这两种类型端口属于多个VLAN，所以需要配置PVID。</li><li>PVID，缺省情况下为VLAN1。</li></ul><h3 id="_26-9-vlan-基本配置" tabindex="-1">26.9 VLAN 基本配置 <a class="header-anchor" href="#_26-9-vlan-基本配置" aria-hidden="true">#</a></h3><ul><li><p>在交换机上创建VLAN，并进入VLAN视图</p><p><code>[Quidway] vlan 10 | vlan batch 10 20 30</code></p></li><li><p>（可选）在特定VLAN视图下修改VLAN的名字</p><p><code>[Quidway-vlan10] name TechVLAN</code></p></li><li><p>为特定的vlan添加接口</p><p><code>[Quidway-vlan10] port GigabitEthernetO/0/1</code></p></li><li><p>将特定的接口配置为access类型，并加入vlan</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">[Quidway] interface gigabitEthernet0/0/1</span></span>
<span class="line"><span style="color:#A6ACCD;">[Quidway-gigabitEthernet0/0/1] port link-type access</span></span>
<span class="line"><span style="color:#A6ACCD;">[Quidway-gigabitEthernet0/0/1] port default vlan 10</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul><h3 id="_26-10-vlan-实验" tabindex="-1">26.10 VLAN 实验 <a class="header-anchor" href="#_26-10-vlan-实验" aria-hidden="true">#</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">[sw1] vlan batch 10 20 # 批量创建 VLAN 10 20</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># 将 GE0/0/1 配置为 access 类型，并加入 VLAN 10</span></span>
<span class="line"><span style="color:#A6ACCD;">[sw1]int g0/0/1</span></span>
<span class="line"><span style="color:#A6ACCD;">[sw1-GigabitEthernet0/0/1]port link-type access</span></span>
<span class="line"><span style="color:#A6ACCD;">[sw1-GigabitEthernet0/0/1]port default vlan 10</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># 将 GE0/0/2 配置为 access 类型，并加入 VLAN 20</span></span>
<span class="line"><span style="color:#A6ACCD;">[sw1-GigabitEthernet0/0/1]int g0/0/2</span></span>
<span class="line"><span style="color:#A6ACCD;">[sw1-GigabitEthernet0/0/2]port link-type access</span></span>
<span class="line"><span style="color:#A6ACCD;">[sw1-GigabitEthernet0/0/2]port default vlan 20</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># 将特定接口配置为 trunk 类型</span></span>
<span class="line"><span style="color:#A6ACCD;">[sw2-GigabitEthernet0/0/2]int g0/0/24</span></span>
<span class="line"><span style="color:#A6ACCD;">[sw2-GigabitEthernet0/0/24]port link-type trunk</span></span>
<span class="line"><span style="color:#A6ACCD;"># 在 接口中放行特定 VLAN</span></span>
<span class="line"><span style="color:#A6ACCD;">[sw2-GigabitEthernet0/0/24]port trunk allow-pass vlan 10 20 99</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># 配置 trunk 接口的 pvid，这个 VLAN 的流量从 trunk 接口转发不会打标签，默认是 vlan 1</span></span>
<span class="line"><span style="color:#A6ACCD;">[sw2-GigabitEthernet0/0/24]port trunk pvid vlan 99</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="_26-11-二层端口类型分析" tabindex="-1">26.11 二层端口类型分析 <a class="header-anchor" href="#_26-11-二层端口类型分析" aria-hidden="true">#</a></h3><ul><li>Access接口收到帧，如果该帧不带tag，则接受帧并打上端口vid</li><li>交换机将帧从相应VLAN接口转发出去，删除Tag。</li><li>如果该接口为trunk，查看allow-pass vlan，如果存在直接转发出去</li></ul><h4 id="_26-11-1-access-接口" tabindex="-1">26.11.1 Access 接口 <a class="header-anchor" href="#_26-11-1-access-接口" aria-hidden="true">#</a></h4><p><img src="/assets/image-20220526223448029.9fd12461.png" alt="image-20220526223448029"></p><p><strong>思考：PC1是否能与PC2、PC3 通信</strong></p><p><img src="/assets/image-20220526223602401.3739f5df.png" alt="image-20220526223602401"></p><ul><li>如果该帧携带tag，则当vlanID与PVID相同时，接收该报文，否则丢弃。</li></ul><p><img src="/assets/image-20220526223530904.bbf4e670.png" alt="image-20220526223530904"></p><h4 id="_26-11-2-trunk-接口" tabindex="-1">26.11.2 Trunk 接口 <a class="header-anchor" href="#_26-11-2-trunk-接口" aria-hidden="true">#</a></h4><ul><li>Trunk接口收到帧，如果不带Tag，打上接口PVID，查看allow-pass vlan，允许则通过，否则丢弃。</li><li>Trunk接口收到帧，如果带Tag，查看allow-pass vlan，允许则通过，否则丢弃。</li></ul><p><img src="/assets/image-20220526223745128.5ee122f4.png" alt="image-20220526223745128"></p><ul><li>Trunk接口发送帧，若vlanID与接口pvid相同，且该vlan在allow-pass vlan列表中，则去掉Tag，发送数据帧。</li><li>Trunk接口发送帧，若vlanID与接口pvid不同，且该vlan在allow-pass vlan列表中，直接发送数据帧。</li></ul><p><img src="/assets/image-20220526223849364.a5fd2e49.png" alt="image-20220526223849364"></p><h4 id="_26-11-3-hybrid-接口" tabindex="-1">26.11.3 Hybrid 接口 <a class="header-anchor" href="#_26-11-3-hybrid-接口" aria-hidden="true">#</a></h4><ul><li>Hybrid接口收到帧，若数据帧带tag，且vlanID在 allow-pass vlan列表里面，则接受该报文，否则丢弃。</li></ul><p><img src="/assets/image-20220526223929994.a3d8f61d.png" alt="image-20220526223929994"></p><ul><li>Hybrid接口发送帧，当vlanID是接口允许通过的vlanID时，发送该帧。可以通过命令设置发送时是否携带Tag。</li></ul><p><img src="/assets/image-20220526223950369.c0c2a1c9.png" alt="image-20220526223950369"></p><h2 id="_26-12-vlan间路由互通" tabindex="-1">26.12 VLAN间路由互通 <a class="header-anchor" href="#_26-12-vlan间路由互通" aria-hidden="true">#</a></h2><p>VLAN能隔离广播域。通常两个广播域之间由路由器连接，广播域之间来往的数据包都是通过路由器中继的。因此，VLAN间的通信需要路由器提供中继服务，这被称为：<mark>VLAN间路由</mark>。</p><p><img src="/assets/image-20220526224049897.d46f37c0.png" alt="image-20220526224049897"></p><h4 id="_26-12-1-通过物理接口实现-vlan-间通信" tabindex="-1">26.12.1 通过物理接口实现 VLAN 间通信 <a class="header-anchor" href="#_26-12-1-通过物理接口实现-vlan-间通信" aria-hidden="true">#</a></h4><ul><li>VLAN 能内部节点的通信是二层通信，而不同 VLAN 之间的节点通信则是三层通信，需要借助三层设备，如<strong>路由器/三层交换机/防火墙</strong>。</li></ul><p><img src="/assets/image-20220526224143196.413b30a1.png" alt="image-20220526224143196"></p><h4 id="_26-12-2-通过子接口实现-vlan-间通信" tabindex="-1">26.12.2 通过子接口实现 VLAN 间通信 <a class="header-anchor" href="#_26-12-2-通过子接口实现-vlan-间通信" aria-hidden="true">#</a></h4><ul><li>在路由器以太网接口上进行“子接口”的划分，与交换机的Trunk链路对接。</li><li>子接口是逻辑接口，可以配置IP地址，需要指定vlan-id（物理接口UP )</li></ul><p><img src="/assets/image-20220526224222740.3815fe20.png" alt="image-20220526224222740"></p><p><img src="/assets/image-20220526224252485.f4c08d3a.png" alt="image-20220526224252485"></p><h2 id="_26-13-vlan-interface" tabindex="-1">26.13 VLAN interface <a class="header-anchor" href="#_26-13-vlan-interface" aria-hidden="true">#</a></h2><p><img src="/assets/image-20220526224316496.2fb1bf9a.png" alt="image-20220526224316496"></p><h2 id="_26-14-三层交换机" tabindex="-1">26.14 三层交换机 <a class="header-anchor" href="#_26-14-三层交换机" aria-hidden="true">#</a></h2><p><img src="/assets/image-20220526224356324.30aec307.png" alt="image-20220526224356324"></p><p><strong>二三层交换机、路由器简单组网</strong></p><p><img src="/assets/image-20220526224446805.c06261eb.png" alt="image-20220526224446805">.</p><p><img src="/assets/image-20220526224452366.632835af.png" alt="image-20220526224452366"></p></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-20b022b2 data-v-f9701d56><!----><div class="prev-next" data-v-f9701d56><div class="pager" data-v-f9701d56><a class="pager-link prev" href="/articles/02-%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88/06-%E6%97%A0%E7%BA%BF%E5%B1%80%E5%9F%9F%E7%BD%91.html" data-v-f9701d56><span class="desc" data-v-f9701d56>上一篇</span><span class="title" data-v-f9701d56>无线局域网</span></a></div><div class="has-prev pager" data-v-f9701d56><a class="pager-link next" href="/articles/02-%E8%BF%90%E7%BB%B4/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88/08-%E4%B8%8B%E4%B8%80%E4%BB%A3%E4%BA%92%E8%81%94%E7%BD%91.html" data-v-f9701d56><span class="desc" data-v-f9701d56>下一篇</span><span class="title" data-v-f9701d56>下一代互联网</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"articles_01-start_01-rule_01-doc-and-file.md\":\"15ed1a9d\",\"articles_02-运维_index.md\":\"28d1ca0c\",\"articles_01-start_index.md\":\"0ab1f733\",\"articles_02-运维_网络工程师_02-计算机网络概述.md\":\"3576e034\",\"index.md\":\"adc28b74\",\"articles_02-运维_网络工程师_08-下一代互联网.md\":\"2bd08bb5\",\"articles_02-运维_网络工程师_09-网络安全.md\":\"4724dd42\",\"articles_02-运维_网络工程师_12-网络管理.md\":\"33e8e0c2\",\"articles_02-运维_网络工程师_11-组网技术.md\":\"79c01ce8\",\"articles_02-运维_网络工程师_05-局域网和城域网.md\":\"5a603974\",\"articles_02-运维_网络工程师_06-无线局域网.md\":\"cd557b47\",\"articles_02-运维_网络工程师_13-网络规划设计.md\":\"b340a580\",\"articles_02-运维_网络工程师_01-计算机硬件基础.md\":\"785cd6f6\",\"articles_02-运维_网络工程师_04-广域通信网.md\":\"2a842d7e\",\"articles_02-运维_网络工程师_10-网络操作系统与应用服务器.md\":\"a5357259\",\"articles_02-运维_网络工程师_07-网络互连与互联网.md\":\"42887aee\",\"articles_02-运维_网络工程师_03-数据通信基础.md\":\"0b96e7aa\"}")</script>
    <script type="module" async src="/assets/app.625f3316.js"></script>
    
  </body>
</html>